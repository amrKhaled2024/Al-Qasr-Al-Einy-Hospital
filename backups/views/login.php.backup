<?php
$pageTitle = 'Login Page';
include '../views/layouts/header.php';
?>

<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header">
            <h2>Welcome to Kasr Al Ainy</h2>
            <p>Please login to continue</p>
        </div>
        <div class="auth-body">
            <?php if (isset($error) && $error): ?>
            <div class="error-message active">
                <?php echo $error; ?>
            </div>
            <?php endif; ?>
            
            <form action="<?php echo APP_URL; ?>/public/index.php?page=login" method="POST" id="login-form">
                <div class="form-group">
                    <label for="login-email">Email Address</label>
                    <input type="email" id="login-email" name="email" class="form-control" 
                           placeholder="Enter your email" required 
                           value="<?php echo $_POST['email'] ?? ''; ?>">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" name="password" 
                           class="form-control" placeholder="Enter your password" required>
                </div>
                <div class="form-group">
                    <label>Select Role</label>
                    <div class="role-selector">
                        <div class="role-option <?php echo ($_POST['role'] ?? 'patient') === 'admin' ? 'active' : ''; ?>" 
                             data-role="admin">Admin</div>
                        <div class="role-option <?php echo ($_POST['role'] ?? '') === 'doctor' ? 'active' : ''; ?>" 
                             data-role="doctor">Doctor</div>
                        <div class="role-option <?php echo ($_POST['role'] ?? '') === 'receptionist' ? 'active' : ''; ?>" 
                             data-role="receptionist">Receptionist</div>
                        <div class="role-option <?php echo ($_POST['role'] ?? 'patient') === 'patient' ? 'active' : ''; ?>" 
                             data-role="patient">Patient</div>
                    </div>
                    <input type="hidden" name="role" id="selected-role" 
                           value="<?php echo $_POST['role'] ?? 'patient'; ?>">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
            </form>
            
            <div class="auth-switch">
                <p>Don't have an account? <a href="<?php echo APP_URL; ?>/public/index.php?page=register">Sign Up Now</a></p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const roleOptions = document.querySelectorAll('.role-option');
    const roleInput = document.getElementById('selected-role');
    
    roleOptions.forEach(option => {
        option.addEventListener('click', function() {
            roleOptions.forEach(opt => opt.classList.remove('active'));
            this.classList.add('active');
            roleInput.value = this.getAttribute('data-role');
        });
    });
});
</script>

<?php include __DIR__ . '/../layouts/footer.php'; ?>